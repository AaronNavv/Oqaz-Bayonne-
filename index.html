<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laissez-nous votre avis</title>
    
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; background-color: #f4f7f6; }
        .card { background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; max-width: 400px; width: 90%; }
        h2 { color: #333; margin-bottom: 1rem; }
        /* Style des étoiles : grises par défaut, jaunes quand elles sont survolées ou actives */
        .stars { font-size: 2.5rem; cursor: pointer; color: #ddd; margin-bottom: 1.5rem; transition: color 0.2s; }
        .stars span:hover, .stars span.active { color: #ffca08; }
        /* Style du bouton bleu type Google */
        button { background-color: #4285F4; color: white; border: none; padding: 12px 25px; border-radius: 5px; font-weight: bold; cursor: pointer; font-size: 1rem; transition: background 0.3s; }
        button:hover { background-color: #357abd; }
        p { color: #666; font-size: 0.9rem; margin-top: 1rem; }
    </style>
</head>
<body>

<div class="card">
    <h2>Votre avis nous intéresse !</h2>
    <p>Comment évalueriez-vous votre expérience ?</p>
    
    <div class="stars" id="star-container">
        <span data-value="1">★</span><span data-value="2">★</span><span data-value="3">★</span><span data-value="4">★</span><span data-value="5">★</span>
    </div>

    <button id="submit-btn" style="display: none;">Envoyer mon avis</button>
</div>

<script>
    const stars = document.querySelectorAll('.stars span');
    const btn = document.getElementById('submit-btn');
    let selectedRating = 0;

    // 3.1 GESTION DU CLIC : Enregistre la note et colore les étoiles
    stars.forEach(star => {
        star.addEventListener('click', () => {
            selectedRating = parseInt(star.getAttribute('data-value'));
            updateStars(selectedRating);
            btn.style.display = 'inline-block'; // Affiche le bouton
        });
    });

    // 3.2 MISE À JOUR VISUELLE : Ajoute la couleur jaune aux étoiles sélectionnées
    function updateStars(rating) {
        stars.forEach(star => {
            star.classList.toggle('active', parseInt(star.getAttribute('data-value')) <= rating);
        });
    }

    // 3.3 REDIRECTION CONDITIONNELLE : 
    // Si la note est >= 4 -> Google
    // Si la note est < 4 -> Mail vers l'agence de Bayonne
    btn.addEventListener('click', () => {
        const googleLink = "https://share.google/ppgzblrbTPX7ld9yb";
        const emailContact = "bayonne@oqaz.fr";

        if (selectedRating >= 4) {
            window.location.href = googleLink;
        } else {
            const subject = encodeURIComponent("Retour d'expérience client - OQAZ Bayonne");
            const body = encodeURIComponent("Bonjour, j'aimerais vous faire part de mon expérience : ");
            window.location.href = `mailto:${emailContact}?subject=${subject}&body=${body}`;
        }
    });
</script>

</body>
</html>
